---
title: "A Look at Montgomery County, MD
Crime over Multiple Time Periods"
author: "Catherine Galant"
toc: true
toc-depth: 2
toc-title: Contents
bibliography: project.bib
format: 
  pdf:
    mainfont: "Times New Roman"
    sansfont: "Times New Roman"
    margin-top: 1cm
    margin-bottom: 1cm
editor: visual
---

# Project Introduction

My goal with this project is to look at how crime in Montgomery County has changed over time. I want to see how crime amount has changed specifically in Montgomery County over the last 10 years, and then take a wider look and see how it has changed over a longer span of time. My second objective is to see how the Montgomery County crime amounts compare to other large surrounding counties. 

## Primary Dataset

My primary datasets is from catalog.Data.gov[@Crime] and is public crime data from Montgomery County, MD that catalogs every crime reported in the county from July 1 2016 to Aug 2 2025. It has 38 variables detailing the specifics of the crime like the exact time, location, charge, victims, location, etc.

This dataset is useful for my guiding questions because it gives specific location, crime, and time data. It will tell me exactly what crime was committed, divided into categories 3 times so to specify the exact incindent. It also includes multiple different location categories, like the exact address, city, and police district.

```{r}
#| echo: False
#| warning: false

#My chosen style guide is the tidyverse style guide

library(tidyverse)
library(ggplot2)
library(kableExtra)

mont_crime <- read.csv("C:\\Users\\catie\\Downloads\\Crime.csv")
```

## Secondary Dataset

My secondary dataset is from opendata.Maryland.gov[@Violent], it includes a tally of violent crimes committed every year from 1975 to 2022 broken up by counties in Maryland. It also gives the percent change of each crime by year, the population of the county, and the crime rate per 100,000 people for each violent crime.

This dataset is important for my guiding questions because it will help compare how Montgomery County compares to it's surrounding counties in terms of crime rates.

```{r}
#| echo: false
#| warning: false

md_crime <- read.csv("C:\\Users\\catie\\Downloads\\Violent_Crime___Property_Crime_by_County__1975_to_Present_20250812.csv")
```

## Data Wrangling

To get my data into a usable format, I will select only the variables that I need from and filter it so that only cases relevant to my data are observed. For my primary dataset 'Crime.csv' from catalog.Data.gov that has every crime reported from July 1, 2016 to August 2, 2025.

I first separate the data into 2 different sets that I would like to look at, the first is how all crime rates change over the time period, the second is how the most common crimes change over time. To identify the most common crimes I group by the common crime name in Crime.Name2 and summarise the count, arrange in descending order and get the top 9 crimes.

### These next steps I do to both dataframes.

I only want the start date and time, the specific crime, and the Police District it happened in. I have to convert the start date and time into a POSIXct date time so that I can use it later and I mutate the column to do that. Then I create new columns that store only the year and the month and get rid of the original Start_Date_Time column. Next I filter out all the minor offenses underneath "All Other Offenses" and all the unfinished Police District information, usually written as "OTHER" or left blank.

For the first dataframe that looks at all crimes over the months and years, named mont_crime_year_district. To get the summary data I need for graphing, I group it by Year, Month, and Police.District, and then summarize it by count. This gets me my tidied dataframe needed for graphing. For the second dataframe, named mont_year_bycrime, that looks at 9 of the top crimes by year, I first filter the data to only have those top 9 crimes, and then I group by year and crime, and summarize again by count. Now this dataframe is also ready to be plotted.

Below are the first 6 lines of each dataframe.

```{r}
#| echo: false
#| warning: false

mont_crime <- mont_crime%>%
  select(Start_Date_Time,Crime.Name2,Police.District.Name)

mont_crime_year_district <- mont_crime %>%
  mutate(Start_Date_Time = as.POSIXct(Start_Date_Time, format = "%m/%d/%Y %H:%M:%S %p")) %>%
  mutate(Year = format(Start_Date_Time, format = '%Y')) %>%
  mutate(Month = format(Start_Date_Time, format='%m')) %>%
  select(-Start_Date_Time) %>%
  filter(Crime.Name2 != 'All Other Offenses') %>%
  filter(Police.District.Name != 'OTHER') %>%
  filter(Police.District.Name != '') %>%
  group_by(Year, Month, Police.District.Name) %>%
  summarise(num=n()) %>%
  arrange(desc(num))

colnames(mont_crime_year_district) <- c('Year', 'Month', 'Police District','Count')
mont_crime_year_district <- na.omit(mont_crime_year_district)

top9_crimes <- (mont_crime %>%
                  group_by(Crime.Name2) %>%
                  summarise(count = n()) %>%
                  filter(Crime.Name2 != 'All Other Offenses') %>%
                  arrange(desc(count)))$Crime.Name2[1:10]

mont_year_bycrime <- mont_crime %>%
  mutate(Start_Date_Time = as.POSIXct(Start_Date_Time,format = "%m/%d/%Y %H:%M:%S %p")) %>%
  mutate(Year = format(Start_Date_Time, format = '%Y')) %>%
  mutate(Month = format(Start_Date_Time, format = '%m')) %>%
  select(-Start_Date_Time) %>% 
  filter(Crime.Name2 %in% top9_crimes) %>%
  filter(Police.District.Name != 'OTHER') %>%
  filter(Police.District.Name != '') %>%
  group_by(Year, Crime.Name2) %>%
  summarise(num = n()) %>%
  arrange(desc(num))
mont_year_bycrime <- na.omit(mont_year_bycrime)
colnames(mont_year_bycrime) <- c('Year', 'Crime', 'Count')
```

```{r}
#| echo: false
#| warning: false
#| label: tbl-crime1
#| tbl-cap: "Montgomery County Crime by Police District/Year"

kable(head(mont_crime_year_district))
```

```{r}
#| echo: false
#| warning: false
#| label: tbl-crime2
#| tbl-cap: "Montgomery County Top Crimes by Year"

kable(head(mont_year_bycrime))

```

For my secondary dataset, it has the total number of the crimes it looks at as individual columns, so I need to pivot the dataframe to be longer and make a new column that has what crime was committed.

After exploratory data analysis I discovered that the number of crimes for murder and rape where much lower than the others and observing the trend for them would be difficult if plotted on the same graph, so I separated them into 2 dataframes for plotting. The first dataframe is md_crime_high for high volume crimes. These crimes are Robbery, Aggravated Assault, Breaking & Entering, and Motor Vehicle Theft. The second dataframe is md_crime_low for low volume crimes, Murder and Rape.

After using filter to get only the counties needed and select to separate the data, I pivoted each dataframe so that instead of multiple columns for each crime, crime was one column with a value and each year and county had multiple rows, making each crime a case rather than each year and county. Now after some cleaning up of the column names the 2 dataframes are complete and ready for plotting. 

Below are the first 5 lines of the new dataframes. 

```{r}
#| echo: false
#| warning: false

md_crime <- md_crime %>%
  filter(JURISDICTION %in% c("Montgomery County", "Baltimore City", "Anne Arundel County", "Prince George's County", "Baltimore County", "Frederick County"))

md_crime_high <- md_crime %>%
  select(JURISDICTION, YEAR, ROBBERY, AGG..ASSAULT, B...E, M.V.THEFT)
md_crime_low <- md_crime %>%
  select(JURISDICTION, YEAR, RAPE, MURDER)
md_crime_high <- md_crime_high %>%
  pivot_longer(cols = c(ROBBERY, AGG..ASSAULT, B...E, M.V.THEFT), names_to = 'CRIME')

md_crime_high$CRIME[md_crime_high$CRIME == 'AGG..ASSAULT'] = 'AGGRAVATED ASSAULT'
md_crime_high$CRIME[md_crime_high$CRIME == 'B...E'] = 'BREAKING & ENTERING'
md_crime_high$CRIME[md_crime_high$CRIME == 'M.V.THEFT'] = 'MOTOR VEHICLE THEFT'

md_crime_low <- md_crime_low %>% 
  pivot_longer(cols = c(MURDER, RAPE),names_to = 'CRIME')
colnames(md_crime_high)<-c('JURISDICTION','YEAR','CRIME','NUMBER')
colnames(md_crime_low)<-c('JURISDICTION','YEAR','CRIME','NUMBER')

md_crime_high[1:5,] %>%
  kbl(caption = "Maryland Crime Numbers by Year for Popular Counties: High Number Crimes") %>%
  kable_classic(full_width = F, html_font = "Cambria")

md_crime_low[1:5,] %>%
  kbl(caption = "Maryland Crime Numbers by Year for Popular Counties: Low Number Crimes") %>%
  kable_classic(full_width = F, html_font = "Cambria")
```

\pagebreak

# Data Visualization

With our new dataframes, viewing the crime trends is much easier. In @fig-plots-1 we can see how the total crime changes over the past 9-10 years throughout each of the police districts in Montgomery County. Each district has different amounts of crime, with more in Montgomery Village, Silver Spring, and Wheaton with less crime elsewhere, although throughout the year every location follows a similar trend line with identical dips and peaks. 

@fig-plots-2 shows us how the top 9 crimes have changed over the years, with very different changes in the crimes being committed. Drug and Narcotic violations as well as DUI's have decreased over the years, while stealing violations have only increased dramatically. In terms of safety measures this is much better because stealing is not a violent crime and has less victims but it raises questions of why this could happen. 

Looking at how crime in Montgomery County has changed over a long period of time and compares to other large counties, we look at @fig-plots-3 and @fig-plots-4. The other counties I chose to look at were Frederick, Baltimore, Anne Arundel, and Prince George's. These are all close by counties in Maryland to Montgomery County and also large population counties. In @fig-plots-3 we can see many interesting trends, like a large decrease in crime from the 70-80's to the 2000-2010's, as well as a major increase in Motor Vehicle Theft in Prince George's county that goes against trend for all other crimes and counties. We can see where more of a specific crime happens, such as the increased amount of Breaking & Entering in Baltimore and PG County. 

In @fig-plots-4 we can see the trend for more violent crimes, in much lower quantity but with some comparable trends. Unlike the other crimes, murder has actually increased since the 70's for Maryland counties and rape switches depending on the county whether it has generally gone up or down. In Montgomery County it has increased significantly in the last 10 years, while it has gone noticeably down in Baltimore City. 

```{r, fig.width=8,fig.height=4.5}
#| echo: false 
#| warning: false
#| label: fig-plots
p_year_district <- ggplot(data = mont_crime_year_district, mapping = aes(x = Month, y = Count, colour = Year)) +
  geom_point() +
  facet_wrap(vars(`Police District`)) +
  theme_bw() +
  theme(axis.text.x = element_text(angle = 60, hjust=0.5)) +
  labs(title='Montgomery County Total Crimes per Month by Year')

p_year_district

p_year_crime <- ggplot(data = mont_year_bycrime, mapping = aes(x = Year, y = Count)) +
  geom_point(mapping = aes(x = Year, y = Count)) +
  facet_wrap(vars(Crime)) +
  theme_bw() + 
  theme(axis.text.x = element_text(angle = 60, hjust = 1)) +
  labs(title = 'Montgomery County Top Crimes by Year')

p_year_crime

high_crime <- md_crime_high %>%
  ggplot(mapping = aes(x = YEAR, y = NUMBER, colour = CRIME)) +
  facet_wrap(vars(JURISDICTION)) +
  geom_line() +
  geom_point() +
  theme_bw() +
  ylab('Number') + 
  xlab("Year") +
  labs(title = "Number of other Crime Incidents in Prominent Maryland Counties 1975-2022", colour = 'Crime')

low_crime <- md_crime_low %>%
  ggplot(mapping = aes(x = YEAR, y = NUMBER, colour = CRIME)) +
  facet_wrap(vars(JURISDICTION)) +
  geom_line() +
  geom_point() +
  theme_bw() +
  ylab('Number') +
  xlab("Year") +
  labs(title = "Number of Murder and Rape Incidents in Prominent Maryland Counties 1975-2022", colour = 'Crime')

high_crime
low_crime

```



\pagebreak

## References

::: {#refs}
:::


## Code Appendix

```{r codeAppend, ref.label=knitr::all_labels(), echo=TRUE, eval=FALSE}


```
